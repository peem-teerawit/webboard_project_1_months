<div>
  <!-- Side Navigation -->
  <div *ngIf="!isDashboardPage">
    <!-- Side Navigation for both users and admins -->
    <div class="sidenav">
      <a routerLink="/threads" class="nav-item">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a routerLink="/popular-thread" class="nav-item">
        <i class="fas fa-fire"></i>
        <span>Popular</span>
      </a>
      <a routerLink="/tags-summary" class="nav-item">
        <i class="fas fa-tags"></i>
        <span>Tags</span>
      </a>
      <!-- Dashboard Link for Admins -->
      <a *ngIf="isAdmin" routerLink="/admin/dashboard" class="nav-item">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
      </a>
    </div>
  </div>

  <!-- Top Navigation -->
  <nav>
    <header class="navbar">
      <div class="navbar-content">
        <a routerLink="/threads" class="brand-title-link" style="text-decoration: none;">
          <h1 class="brand-title">ThreadHub</h1>
        </a>
        <form class="search-form" role="search">
          <label for="search-input" class="visually-hidden"></label>
          <input id="search-input" type="search" class="search-input" placeholder="Search" aria-label="Search">
          <button type="submit" class="search-button" aria-label="Submit search">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/26f821edfea7b2d4986ddc8a202bf783c65071ce0a45996630862979a5adbf39"
              alt="Search" class="search-icon">
          </button>
        </form>

        <div class="navbar-content2">
          <a *ngIf="token" routerLink="/create-thread" style="text-decoration: none;">
            <button class="create-button" aria-label="Create a new thread">
              <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/1867f60c4e36021020824775ec699e367a7e4dca19e247b633b0f07f66d8dcb0"
                alt="Create" class="create-icon">
              <span>Create</span>
            </button>
          </a>

          <nav class="user-nav">
            <button *ngIf="token" class="notification-button" aria-label="Notifications">
              <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/cb39bdcd2f8b8e8f5b5b8eca0d08c38f0dac613a1927b1d9067b914c838149f3"
                alt="Notifications" class="notification-icon">
            </button>

            <div class="user-welcome" *ngIf="username">
              <span class="welcome-text">Welcome, {{ username }}!</span>
            </div>

            <div class="dropdown">
              <button class="profile-button" aria-label="User profile" (click)="toggleDropdown()">
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/fdb62f0621af96e810da139cf12cd6ca867c7bc75fd0fbd964747a96c9f5e0ae"
                  alt="Profile" class="profile-icon">
              </button>

              <div *ngIf="dropdownOpen" class="dropdown-content">
                <a *ngIf="!username" routerLink="/login" class="dropdown-item">เข้าสู่ระบบ</a>
                <a *ngIf="token" routerLink="/thread-history" class="dropdown-item">ประวัติกระทู้</a>
                <button *ngIf="username" (click)="logOut()" class="dropdown-item">ออกจากระบบ</button>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>
  </nav>

  <!-- Loading Overlay -->
  <div *ngIf="loading" class="loading-overlay">
    <span class="loading-text">กำลังออกจากระบบ...</span>
  </div>

  <div>
    <router-outlet></router-outlet>
  </div>
</div>
